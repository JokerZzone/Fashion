<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanou.dao.GoodsMapper">

	<select id="findGoods" parameterType="int" resultMap="GoodsResultMap.goodsResult">
		select *
		from goods where goods_id = #{aa}
	</select>

	<select id="findGoodsById" parameterType="int" resultMap="GoodsResultMap.goodsResult">
		select
		* from goods as a, goods_gallery as b where
		a.goods_id = b.goods_id and
		a.goods_id = #{aa}
	</select>
	<select id="findBrand" parameterType="int" resultMap="GoodsResultMap.goodsResult">
		select * 
		from brand where brand_id = #{aa}
	</select>

	<!-- xy -->
	<!-- 点击标题获取的商品 -->
	<select id="findAllGoods" resultMap="GoodsResultMap.goodsResult">
		select a.goods_id,a.goods_name,a.shop_price,a.discount from goods as
		a,goods_cat as b
		where a.goods_id = b.goods_id and b.nav_id =
		#{titleId}
		<if test="chooseId ==1">
			<if test="sortId == 0">
				order by shop_price Asc LIMIT #{pageId},#{pageCount}
			</if>
			<if test="sortId == 1">
				order by shop_price Desc LIMIT #{pageId},#{pageCount}
			</if>
		</if>
		<if test="chooseId == 0">
			LIMIT #{pageId},36
		</if>
	</select>
	<!-- 获取标题所有商品数量 -->
	<select id="goodsTotal" parameterType="int" resultType="int">
		select count(*) from goods_cat where nav_id = #{aa}
	</select>

	<!-- 获取二级商品的商品 -->
	<select id="findSecondGoods" resultMap="GoodsResultMap.goodsResult">
		select a.goods_id,a.goods_name,a.shop_price,a.discount from goods as
		a,goods_cat as b
		where a.goods_id = b.goods_id and b.cat_id = #{catId}
		<if test="chooseId ==1">
			<if test="sortId == 0">
				order by shop_price Asc LIMIT #{pageId},#{pageCount}
			</if>
			<if test="sortId == 1">
				order by shop_price Desc LIMIT #{pageId},#{pageCount}
			</if>
		</if>
		<if test="chooseId == 0">
			LIMIT #{pageId},36
		</if>
	</select>
	<!-- 获取二级分类所有商品数量 -->
	<select id="SecondGoodsTotal" parameterType="int" resultType="int">
		select count(*) from goods_cat where cat_id = #{aa}
	</select>
	
	<!-- 点击一级分类获取的商品 -->
	<select id="showHomePage" resultMap="GoodsResultMap.goodsResult">
		select goods_id,goods_name,shop_price,discount from goods where key_id = #{keyId} 
		<if test="chooseId ==1">
			<if test="sortId == 0">
				order by shop_price Asc LIMIT #{pageId},#{pageCount}
			</if>
			<if test="sortId == 1">
				order by shop_price Desc LIMIT #{pageId},#{pageCount}
			</if>
		</if>
		<if test="chooseId == 0">
			LIMIT #{pageId},36
		</if>
	</select>
	<select id="homePageGoodsTotal" parameterType="int" resultType="int">
		select count(*) from goods where key_Id = #{aa}
	</select>
	
	
	<!-- 明星推荐方法 -->
	<select id="recommendGoods" resultMap="GoodsResultMap.goodsResult">
		select goods_id,goods_name,shop_price,discount from goods where is_recommend = 1
	</select>
	
	<!-- 清仓方法 -->
	<select id="saleOut" resultMap="GoodsResultMap.goodsResult">
		select goods_id,goods_name,shop_price,discount from goods where is_out = 1
	</select>
</mapper>